<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<button id="new-socket">press me</button>
<script>
document.addEventListener('DOMContentLoaded', () => {
  let btn = document.getElementById('new-socket')
  let sockets = []

  btn.addEventListener('click', () => {
    let sock = new WebSocket("ws://84.38.180.81:8000/pidor")
    let sockId = sockets.length

    sock.addEventListener("message", (event) => {
      console.log('message from socket ' + sockId + ':', event.data);
    });

    sockets.push(sock)
  })
})
</script>
</body>
</html>